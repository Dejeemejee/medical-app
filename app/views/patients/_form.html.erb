<div class="container mx-auto px-4 py-6">
  <div class="bg-white rounded-lg shadow p-6">
    <%= form_with model: @patient, local: true do |form| %>
      
      <!-- Error Messages -->
      <% if @patient.errors.any? %>
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
          <h2 class="text-red-800 font-medium mb-2">
            <%= pluralize(@patient.errors.count, "error") %> prohibited this patient from being saved:
          </h2>
          <ul class="list-disc list-inside text-red-700 text-sm space-y-1">
            <% @patient.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <!-- Form Fields Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <!-- First Name -->
        <div>
          <%= form.label :first_name, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :first_name, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Last Name -->
        <div>
          <%= form.label :last_name, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :last_name, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Email -->
        <div>
          <%= form.label :email, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.email_field :email, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Phone -->
        <div>
          <%= form.label :phone, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.telephone_field :phone, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Date of Birth -->
        <div>
          <%= form.label :date_of_birth, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.date_field :date_of_birth, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Medical Record Number -->
        <div>
          <%= form.label :medical_record_number, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :medical_record_number, 
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>
      </div>

      <!-- Full Width Fields -->
      <div class="mt-6 space-y-6">
        
        <!-- Address -->
        <div>
          <%= form.label :address, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :address, rows: 3,
              class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
        </div>

        <!-- Doctor Assignment -->
        <div>
          <%= form.label :doctor_id, "Assign Doctor", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.select :doctor_id, 
              options_from_collection_for_select(@doctors, :id, :first_name, @patient.doctor_id), 
              { prompt: 'Select a doctor (optional)' },
              { class: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" } %>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="mt-8">
        <%= form.submit "Register New Patient",
            class: "w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" %>
      </div>

    <% end %>
  </div>
</div>